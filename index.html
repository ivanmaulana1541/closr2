<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">
<title>closr2 ‚Äî CARTO avatar GPS</title>

<link rel="stylesheet"
href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>

body{
margin:0;
font-family:Arial;
background:#eef1f7;
}

header{
background:#4a6cff;
color:white;
padding:12px;
text-align:center;
font-size:18px;
}

#map{
height:90vh;
}

</style>

</head>

<body>

<header>üìç closr2 ‚Äî CARTO avatar radar</header>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

//////////////////////////////////////////////////////
// MAP INIT ‚Äî CARTO STYLE
//////////////////////////////////////////////////////

let map=L.map("map").setView([-6.2,106.8],15);

L.tileLayer(
"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
{
attribution:"¬© CARTO"
}
).addTo(map);

//////////////////////////////////////////////////////
// AVATAR ICON ‚Äî LOCAL FILE
//////////////////////////////////////////////////////

let avatarIcon=L.divIcon({
className:"",
html:`
<img src="avatar/avatar1.png"
style="
width:60px;
height:60px;
border-radius:50%;
border:3px solid #ff7b00;">
`
});

//////////////////////////////////////////////////////
// GPS TRACKING
//////////////////////////////////////////////////////

let myMarker=null;

navigator.geolocation.watchPosition(

pos=>{

let lat=pos.coords.latitude;
let lng=pos.coords.longitude;

// fokus map ke posisi kamu
map.setView([lat,lng],16);

// buat marker pertama kali
if(!myMarker){

myMarker=L.marker([lat,lng],{icon:avatarIcon})
.addTo(map)
.bindPopup("Ini kamu üòé")
.openPopup();

}else{

// update posisi marker
myMarker.setLatLng([lat,lng]);

}

},

err=>{
alert("GPS tidak diizinkan atau gagal.");
},

{
enableHighAccuracy:true
}

);

</script>

</body>
</html>
